{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'../axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminUserPlans=()=>{const[data,setData]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchData=async()=>{setLoading(true);setError('');try{const token=localStorage.getItem('token');const usersRes=await axios.get('/api/auth/admin/users',{headers:{Authorization:\"Bearer \".concat(token)}});const subsRes=await axios.get('/api/auth/admin/all-subscriptions',{headers:{Authorization:\"Bearer \".concat(token)}});const users=usersRes.data.users;const allSubs=subsRes.data.subscriptions;const planData=users.map(user=>{const userSubs=allSubs.filter(s=>s.user&&s.user._id===user._id);const latest=userSubs.sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt))[0];return{name:user.name,email:user.email,plan:latest?latest.plan:'None',expiresAt:latest&&latest.expiresAt?new Date(latest.expiresAt).toLocaleDateString():'N/A',status:latest?latest.status:'N/A'};});setData(planData);}catch(err){setError('Could not fetch user plans.');}setLoading(false);};fetchData();},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:900,margin:'0 auto',color:'#E5E7EB'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#2ECC71',fontWeight:700,fontSize:'1.7rem',marginBottom:'1.2rem'},children:\"User Plans\"}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}):error?/*#__PURE__*/_jsx(\"div\",{style:{color:'#FF6B35'},children:error}):/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',background:'#23272F',borderRadius:'1rem',overflow:'hidden'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:'#181A20'},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.8rem',textAlign:'left'},children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.8rem',textAlign:'left'},children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.8rem',textAlign:'left'},children:\"Plan\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.8rem',textAlign:'left'},children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'0.8rem',textAlign:'left'},children:\"Expires At\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map((u,i)=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'1px solid #333'},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.8rem'},children:u.name}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.8rem'},children:u.email}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.8rem'},children:u.plan}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.8rem'},children:u.status}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'0.8rem'},children:u.expiresAt})]},i))})]})]});};export default AdminUserPlans;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","AdminUserPlans","data","setData","loading","setLoading","error","setError","fetchData","token","localStorage","getItem","usersRes","get","headers","Authorization","concat","subsRes","users","allSubs","subscriptions","planData","map","user","userSubs","filter","s","_id","latest","sort","a","b","Date","createdAt","name","email","plan","expiresAt","toLocaleDateString","status","err","style","maxWidth","margin","color","children","fontWeight","fontSize","marginBottom","width","borderCollapse","background","borderRadius","overflow","padding","textAlign","u","i","borderBottom"],"sources":["D:/WORKING WEBSITES/CUSTM WEB/frontend/src/pages/AdminUserPlans.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from '../axios';\n\nconst AdminUserPlans = () => {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const token = localStorage.getItem('token');\n        const usersRes = await axios.get('/api/auth/admin/users', {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        const subsRes = await axios.get('/api/auth/admin/all-subscriptions', {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        const users = usersRes.data.users;\n        const allSubs = subsRes.data.subscriptions;\n        const planData = users.map(user => {\n          const userSubs = allSubs.filter(s => (s.user && (s.user._id === user._id)));\n          const latest = userSubs.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))[0];\n          return {\n            name: user.name,\n            email: user.email,\n            plan: latest ? latest.plan : 'None',\n            expiresAt: latest && latest.expiresAt ? new Date(latest.expiresAt).toLocaleDateString() : 'N/A',\n            status: latest ? latest.status : 'N/A',\n          };\n        });\n        setData(planData);\n      } catch (err) {\n        setError('Could not fetch user plans.');\n      }\n      setLoading(false);\n    };\n    fetchData();\n  }, []);\n\n  return (\n    <div style={{ maxWidth: 900, margin: '0 auto', color: '#E5E7EB' }}>\n      <h2 style={{ color: '#2ECC71', fontWeight: 700, fontSize: '1.7rem', marginBottom: '1.2rem' }}>User Plans</h2>\n      {loading ? (\n        <div>Loading...</div>\n      ) : error ? (\n        <div style={{ color: '#FF6B35' }}>{error}</div>\n      ) : (\n        <table style={{ width: '100%', borderCollapse: 'collapse', background: '#23272F', borderRadius: '1rem', overflow: 'hidden' }}>\n          <thead>\n            <tr style={{ background: '#181A20' }}>\n              <th style={{ padding: '0.8rem', textAlign: 'left' }}>Name</th>\n              <th style={{ padding: '0.8rem', textAlign: 'left' }}>Email</th>\n              <th style={{ padding: '0.8rem', textAlign: 'left' }}>Plan</th>\n              <th style={{ padding: '0.8rem', textAlign: 'left' }}>Status</th>\n              <th style={{ padding: '0.8rem', textAlign: 'left' }}>Expires At</th>\n            </tr>\n          </thead>\n          <tbody>\n            {data.map((u, i) => (\n              <tr key={i} style={{ borderBottom: '1px solid #333' }}>\n                <td style={{ padding: '0.8rem' }}>{u.name}</td>\n                <td style={{ padding: '0.8rem' }}>{u.email}</td>\n                <td style={{ padding: '0.8rem' }}>{u.plan}</td>\n                <td style={{ padding: '0.8rem' }}>{u.status}</td>\n                <td style={{ padding: '0.8rem' }}>{u.expiresAt}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n};\n\nexport default AdminUserPlans; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}