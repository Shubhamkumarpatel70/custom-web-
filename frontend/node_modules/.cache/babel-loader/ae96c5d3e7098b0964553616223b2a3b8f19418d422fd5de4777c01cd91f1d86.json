{"ast":null,"code":"import axios from'axios';const instance=axios.create({baseURL:process.env.REACT_APP_API_URL||'https://custom-web-backend.onrender.com',timeout:15000,// Increased timeout to 15 seconds\nheaders:{'Content-Type':'application/json'}});// Request interceptor for performance optimization\ninstance.interceptors.request.use(config=>{// Add timestamp for caching\nconfig.metadata={startTime:new Date()};// Add auth token if available\nconst token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{return Promise.reject(error);});// Response interceptor for performance monitoring and error handling\ninstance.interceptors.response.use(response=>{var _response$config$meta;// Log response time for performance monitoring\nconst endTime=new Date();const startTime=(_response$config$meta=response.config.metadata)===null||_response$config$meta===void 0?void 0:_response$config$meta.startTime;if(startTime){const duration=endTime.getTime()-startTime.getTime();console.log(\"API call to \".concat(response.config.url,\" took \").concat(duration,\"ms\"));}return response;},async error=>{var _error$config,_error$config2,_error$response;// Retry logic for network errors\nif(error.code==='ECONNABORTED'||error.message.includes('timeout')){console.log('Request timeout, retrying...');// Retry once for timeout errors\nif(error.config&&!error.config._retry){error.config._retry=true;console.log('Retrying request:',error.config.url);return instance.request(error.config);}}// Log error details for debugging\nconsole.error('API Error:',{url:(_error$config=error.config)===null||_error$config===void 0?void 0:_error$config.url,method:(_error$config2=error.config)===null||_error$config2===void 0?void 0:_error$config2.method,status:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,message:error.message});return Promise.reject(error);});export default instance;","map":{"version":3,"names":["axios","instance","create","baseURL","process","env","REACT_APP_API_URL","timeout","headers","interceptors","request","use","config","metadata","startTime","Date","token","localStorage","getItem","Authorization","concat","error","Promise","reject","response","_response$config$meta","endTime","duration","getTime","console","log","url","_error$config","_error$config2","_error$response","code","message","includes","_retry","method","status"],"sources":["D:/WORKING WEBSITES/CUSTM WEB/frontend/src/axios.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst instance = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL || 'https://custom-web-backend.onrender.com',\r\n  timeout: 15000, // Increased timeout to 15 seconds\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor for performance optimization\r\ninstance.interceptors.request.use(\r\n  (config) => {\r\n    // Add timestamp for caching\r\n    config.metadata = { startTime: new Date() };\r\n    \r\n    // Add auth token if available\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    \r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor for performance monitoring and error handling\r\ninstance.interceptors.response.use(\r\n  (response) => {\r\n    // Log response time for performance monitoring\r\n    const endTime = new Date();\r\n    const startTime = response.config.metadata?.startTime;\r\n    if (startTime) {\r\n      const duration = endTime.getTime() - startTime.getTime();\r\n      console.log(`API call to ${response.config.url} took ${duration}ms`);\r\n    }\r\n    \r\n    return response;\r\n  },\r\n  async (error) => {\r\n    // Retry logic for network errors\r\n    if (error.code === 'ECONNABORTED' || error.message.includes('timeout')) {\r\n      console.log('Request timeout, retrying...');\r\n      \r\n      // Retry once for timeout errors\r\n      if (error.config && !error.config._retry) {\r\n        error.config._retry = true;\r\n        console.log('Retrying request:', error.config.url);\r\n        return instance.request(error.config);\r\n      }\r\n    }\r\n    \r\n    // Log error details for debugging\r\n    console.error('API Error:', {\r\n      url: error.config?.url,\r\n      method: error.config?.method,\r\n      status: error.response?.status,\r\n      message: error.message\r\n    });\r\n    \r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default instance; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,QAAQ,CAAGD,KAAK,CAACE,MAAM,CAAC,CAC5BC,OAAO,CAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,yCAAyC,CACnFC,OAAO,CAAE,KAAK,CAAE;AAChBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF;AACAP,QAAQ,CAACQ,YAAY,CAACC,OAAO,CAACC,GAAG,CAC9BC,MAAM,EAAK,CACV;AACAA,MAAM,CAACC,QAAQ,CAAG,CAAEC,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAE,CAAC,CAE3C;AACA,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACTJ,MAAM,CAACJ,OAAO,CAACW,aAAa,WAAAC,MAAA,CAAaJ,KAAK,CAAE,CAClD,CAEA,MAAO,CAAAJ,MAAM,CACf,CAAC,CACAS,KAAK,EAAK,CACT,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CACF,CAAC,CAED;AACApB,QAAQ,CAACQ,YAAY,CAACe,QAAQ,CAACb,GAAG,CAC/Ba,QAAQ,EAAK,KAAAC,qBAAA,CACZ;AACA,KAAM,CAAAC,OAAO,CAAG,GAAI,CAAAX,IAAI,CAAC,CAAC,CAC1B,KAAM,CAAAD,SAAS,EAAAW,qBAAA,CAAGD,QAAQ,CAACZ,MAAM,CAACC,QAAQ,UAAAY,qBAAA,iBAAxBA,qBAAA,CAA0BX,SAAS,CACrD,GAAIA,SAAS,CAAE,CACb,KAAM,CAAAa,QAAQ,CAAGD,OAAO,CAACE,OAAO,CAAC,CAAC,CAAGd,SAAS,CAACc,OAAO,CAAC,CAAC,CACxDC,OAAO,CAACC,GAAG,gBAAAV,MAAA,CAAgBI,QAAQ,CAACZ,MAAM,CAACmB,GAAG,WAAAX,MAAA,CAASO,QAAQ,MAAI,CAAC,CACtE,CAEA,MAAO,CAAAH,QAAQ,CACjB,CAAC,CACD,KAAO,CAAAH,KAAK,EAAK,KAAAW,aAAA,CAAAC,cAAA,CAAAC,eAAA,CACf;AACA,GAAIb,KAAK,CAACc,IAAI,GAAK,cAAc,EAAId,KAAK,CAACe,OAAO,CAACC,QAAQ,CAAC,SAAS,CAAC,CAAE,CACtER,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC,CAE3C;AACA,GAAIT,KAAK,CAACT,MAAM,EAAI,CAACS,KAAK,CAACT,MAAM,CAAC0B,MAAM,CAAE,CACxCjB,KAAK,CAACT,MAAM,CAAC0B,MAAM,CAAG,IAAI,CAC1BT,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAET,KAAK,CAACT,MAAM,CAACmB,GAAG,CAAC,CAClD,MAAO,CAAA9B,QAAQ,CAACS,OAAO,CAACW,KAAK,CAACT,MAAM,CAAC,CACvC,CACF,CAEA;AACAiB,OAAO,CAACR,KAAK,CAAC,YAAY,CAAE,CAC1BU,GAAG,EAAAC,aAAA,CAAEX,KAAK,CAACT,MAAM,UAAAoB,aAAA,iBAAZA,aAAA,CAAcD,GAAG,CACtBQ,MAAM,EAAAN,cAAA,CAAEZ,KAAK,CAACT,MAAM,UAAAqB,cAAA,iBAAZA,cAAA,CAAcM,MAAM,CAC5BC,MAAM,EAAAN,eAAA,CAAEb,KAAK,CAACG,QAAQ,UAAAU,eAAA,iBAAdA,eAAA,CAAgBM,MAAM,CAC9BJ,OAAO,CAAEf,KAAK,CAACe,OACjB,CAAC,CAAC,CAEF,MAAO,CAAAd,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CACF,CAAC,CAED,cAAe,CAAApB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}