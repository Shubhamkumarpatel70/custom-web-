{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'../axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminRenewalRequests=()=>{const[renewalRequests,setRenewalRequests]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{fetchRenewalRequests();},[]);const fetchRenewalRequests=async()=>{try{const token=localStorage.getItem('token');const res=await axios.get('/api/auth/admin/renewal-requests',{headers:{Authorization:\"Bearer \".concat(token)}});setRenewalRequests(res.data.subscriptions);setLoading(false);}catch(err){setError('Could not fetch renewal requests.');setLoading(false);}};const handleApprove=async subscriptionId=>{try{const token=localStorage.getItem('token');await axios.patch(\"/api/auth/admin/renewal-requests/\".concat(subscriptionId,\"/approve\"),{},{headers:{Authorization:\"Bearer \".concat(token)}});fetchRenewalRequests();}catch(err){setError('Could not approve renewal request.');}};const handleReject=async subscriptionId=>{const reason=prompt('Please provide a reason for rejection:');if(!reason)return;try{const token=localStorage.getItem('token');await axios.patch(\"/api/auth/admin/renewal-requests/\".concat(subscriptionId,\"/reject\"),{reason},{headers:{Authorization:\"Bearer \".concat(token)}});fetchRenewalRequests();}catch(err){setError('Could not reject renewal request.');}};if(loading)return/*#__PURE__*/_jsx(\"div\",{style:{color:'#E5E7EB',textAlign:'center',padding:'2rem'},children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{style:{color:'#E5E7EB',maxWidth:'1200px',margin:'0 auto'},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{color:'#2ECC71',fontWeight:700,fontSize:'1.7rem',marginBottom:'1.2rem'},children:[\"Renewal Requests (\",renewalRequests.length,\")\"]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#FF6B35',marginBottom:'1rem'},children:error}),renewalRequests.length===0?/*#__PURE__*/_jsx(\"div\",{style:{background:'#23272F',borderRadius:'1rem',padding:'2rem',textAlign:'center',color:'#9CA3AF'},children:\"No pending renewal requests\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'1rem'},children:renewalRequests.map(request=>{var _request$user,_request$user2;return/*#__PURE__*/_jsx(\"div\",{style:{background:'#23272F',borderRadius:'1rem',padding:'1.5rem',border:'1px solid #333'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:'1rem'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'#2ECC71',marginBottom:'0.5rem'},children:((_request$user=request.user)===null||_request$user===void 0?void 0:_request$user.name)||'Unknown User'}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#9CA3AF',marginBottom:'0.5rem'},children:((_request$user2=request.user)===null||_request$user2===void 0?void 0:_request$user2.email)||'No email'}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#E5E7EB'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Plan:\"}),\" \",request.plan.charAt(0).toUpperCase()+request.plan.slice(1)]}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#E5E7EB'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Current Status:\"}),\" \",request.status]}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#E5E7EB'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Expires:\"}),\" \",request.expiresAt?new Date(request.expiresAt).toLocaleDateString():'No expiry date']}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#E5E7EB'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Renewal Requested:\"}),\" \",new Date(request.renewalRequestDate).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'0.5rem'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleApprove(request._id),style:{background:'#2ECC71',color:'#181A20',border:'none',borderRadius:'0.5rem',padding:'0.5rem 1rem',fontWeight:600,cursor:'pointer'},children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleReject(request._id),style:{background:'#FF6B35',color:'#fff',border:'none',borderRadius:'0.5rem',padding:'0.5rem 1rem',fontWeight:600,cursor:'pointer'},children:\"Reject\"})]})]})},request._id);})})]});};export default AdminRenewalRequests;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","AdminRenewalRequests","renewalRequests","setRenewalRequests","loading","setLoading","error","setError","fetchRenewalRequests","token","localStorage","getItem","res","get","headers","Authorization","concat","data","subscriptions","err","handleApprove","subscriptionId","patch","handleReject","reason","prompt","style","color","textAlign","padding","children","maxWidth","margin","fontWeight","fontSize","marginBottom","length","background","borderRadius","display","gap","map","request","_request$user","_request$user2","border","justifyContent","alignItems","user","name","email","plan","charAt","toUpperCase","slice","status","expiresAt","Date","toLocaleDateString","renewalRequestDate","onClick","_id","cursor"],"sources":["D:/WORKING WEBSITES/CUSTM WEB/frontend/src/pages/AdminRenewalRequests.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from '../axios';\n\nconst AdminRenewalRequests = () => {\n  const [renewalRequests, setRenewalRequests] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    fetchRenewalRequests();\n  }, []);\n\n  const fetchRenewalRequests = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const res = await axios.get('/api/auth/admin/renewal-requests', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setRenewalRequests(res.data.subscriptions);\n      setLoading(false);\n    } catch (err) {\n      setError('Could not fetch renewal requests.');\n      setLoading(false);\n    }\n  };\n\n  const handleApprove = async (subscriptionId) => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.patch(`/api/auth/admin/renewal-requests/${subscriptionId}/approve`, {}, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      fetchRenewalRequests();\n    } catch (err) {\n      setError('Could not approve renewal request.');\n    }\n  };\n\n  const handleReject = async (subscriptionId) => {\n    const reason = prompt('Please provide a reason for rejection:');\n    if (!reason) return;\n    \n    try {\n      const token = localStorage.getItem('token');\n      await axios.patch(`/api/auth/admin/renewal-requests/${subscriptionId}/reject`, \n        { reason }, \n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      fetchRenewalRequests();\n    } catch (err) {\n      setError('Could not reject renewal request.');\n    }\n  };\n\n  if (loading) return <div style={{ color: '#E5E7EB', textAlign: 'center', padding: '2rem' }}>Loading...</div>;\n\n  return (\n    <div style={{ color: '#E5E7EB', maxWidth: '1200px', margin: '0 auto' }}>\n      <h2 style={{ color: '#2ECC71', fontWeight: 700, fontSize: '1.7rem', marginBottom: '1.2rem' }}>\n        Renewal Requests ({renewalRequests.length})\n      </h2>\n      \n      {error && <div style={{ color: '#FF6B35', marginBottom: '1rem' }}>{error}</div>}\n      \n      {renewalRequests.length === 0 ? (\n        <div style={{ \n          background: '#23272F', \n          borderRadius: '1rem', \n          padding: '2rem', \n          textAlign: 'center',\n          color: '#9CA3AF'\n        }}>\n          No pending renewal requests\n        </div>\n      ) : (\n        <div style={{ display: 'grid', gap: '1rem' }}>\n          {renewalRequests.map((request) => (\n            <div key={request._id} style={{\n              background: '#23272F',\n              borderRadius: '1rem',\n              padding: '1.5rem',\n              border: '1px solid #333'\n            }}>\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '1rem' }}>\n                <div>\n                  <h3 style={{ color: '#2ECC71', marginBottom: '0.5rem' }}>\n                    {request.user?.name || 'Unknown User'}\n                  </h3>\n                  <p style={{ color: '#9CA3AF', marginBottom: '0.5rem' }}>\n                    {request.user?.email || 'No email'}\n                  </p>\n                  <p style={{ color: '#E5E7EB' }}>\n                    <strong>Plan:</strong> {request.plan.charAt(0).toUpperCase() + request.plan.slice(1)}\n                  </p>\n                  <p style={{ color: '#E5E7EB' }}>\n                    <strong>Current Status:</strong> {request.status}\n                  </p>\n                  <p style={{ color: '#E5E7EB' }}>\n                    <strong>Expires:</strong> {request.expiresAt ? new Date(request.expiresAt).toLocaleDateString() : 'No expiry date'}\n                  </p>\n                  <p style={{ color: '#E5E7EB' }}>\n                    <strong>Renewal Requested:</strong> {new Date(request.renewalRequestDate).toLocaleDateString()}\n                  </p>\n                </div>\n                <div style={{ display: 'flex', gap: '0.5rem' }}>\n                  <button\n                    onClick={() => handleApprove(request._id)}\n                    style={{\n                      background: '#2ECC71',\n                      color: '#181A20',\n                      border: 'none',\n                      borderRadius: '0.5rem',\n                      padding: '0.5rem 1rem',\n                      fontWeight: 600,\n                      cursor: 'pointer'\n                    }}\n                  >\n                    Approve\n                  </button>\n                  <button\n                    onClick={() => handleReject(request._id)}\n                    style={{\n                      background: '#FF6B35',\n                      color: '#fff',\n                      border: 'none',\n                      borderRadius: '0.5rem',\n                      padding: '0.5rem 1rem',\n                      fontWeight: 600,\n                      cursor: 'pointer'\n                    }}\n                  >\n                    Reject\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdminRenewalRequests; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}