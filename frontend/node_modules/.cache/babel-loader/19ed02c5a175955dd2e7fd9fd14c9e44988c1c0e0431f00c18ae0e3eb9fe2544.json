{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate,Outlet}from'react-router-dom';import axios from'../axios';import Sidebar from'../components/Sidebar';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[sidebarOpen,setSidebarOpen]=useState(false);const navigate=useNavigate();useEffect(()=>{const token=localStorage.getItem('token');if(!token){navigate('/login');return;}axios.get('/api/dashboard',{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>{setUser(res.data.user);setLoading(false);}).catch(()=>{localStorage.removeItem('token');navigate('/login');});},[navigate]);const handleLogout=()=>{localStorage.removeItem('token');navigate('/login');};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading dashboard...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[sidebarOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-overlay\",onClick:()=>setSidebarOpen(false)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarOpen(!sidebarOpen),className:\"mobile-menu-btn\",\"aria-label\":\"Toggle sidebar\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"hamburger \".concat(sidebarOpen?'active':''),children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})}),/*#__PURE__*/_jsx(\"aside\",{className:\"dashboard-sidebar \".concat(sidebarOpen?'open':''),children:/*#__PURE__*/_jsx(Sidebar,{onLogout:handleLogout})}),/*#__PURE__*/_jsx(\"main\",{className:\"dashboard-main\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-content\",children:/*#__PURE__*/_jsx(Outlet,{context:{user}})})})]});}export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Outlet","axios","Sidebar","jsx","_jsx","jsxs","_jsxs","Dashboard","user","setUser","loading","setLoading","sidebarOpen","setSidebarOpen","navigate","token","localStorage","getItem","get","headers","Authorization","concat","then","res","data","catch","removeItem","handleLogout","className","children","onClick","onLogout","context"],"sources":["D:/WORKING WEBSITES/CUSTM WEB/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate, Outlet } from 'react-router-dom';\nimport axios from '../axios';\nimport Sidebar from '../components/Sidebar';\nimport './Dashboard.css';\n\nfunction Dashboard() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n    axios.get('/api/dashboard', {\n      headers: { Authorization: `Bearer ${token}` }\n    })\n      .then(res => {\n        setUser(res.data.user);\n        setLoading(false);\n      })\n      .catch(() => {\n        localStorage.removeItem('token');\n        navigate('/login');\n      });\n  }, [navigate]);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    navigate('/login');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"dashboard-loading\">\n        <div className=\"loading-spinner\"></div>\n        <p>Loading dashboard...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"dashboard-container\">\n      {/* Mobile Overlay */}\n      {sidebarOpen && <div className=\"sidebar-overlay\" onClick={() => setSidebarOpen(false)}></div>}\n      \n      {/* Mobile Menu Button */}\n      <button\n        onClick={() => setSidebarOpen(!sidebarOpen)}\n        className=\"mobile-menu-btn\"\n        aria-label=\"Toggle sidebar\"\n      >\n        <span className={`hamburger ${sidebarOpen ? 'active' : ''}`}>\n          <span></span>\n          <span></span>\n          <span></span>\n        </span>\n      </button>\n\n      {/* Sidebar */}\n      <aside className={`dashboard-sidebar ${sidebarOpen ? 'open' : ''}`}>\n        <Sidebar onLogout={handleLogout} />\n      </aside>\n\n      {/* Main Content */}\n      <main className=\"dashboard-main\">\n        <div className=\"dashboard-content\">\n          <Outlet context={{ user }} />\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default Dashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}